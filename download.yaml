    name: Download and Commit File

    on: [push]

    jobs:
      download-and-commit:
        runs-on: windows-latest
        steps:
        - uses: actions/checkout@v2
          with:
            fetch-depth: 0 # 确保整个git历史被检出
        - name: Download file
          run: .\download.bat
        - name: Configure git
          run: |
            git config --local user.email "action@github.com"
            git config --local user.name "GitHub Action"
        - name: Commit and push if changed
          run: |
            git add .
            git commit -m "Add downloaded file" -a || echo "No changes to commit"
            git push
